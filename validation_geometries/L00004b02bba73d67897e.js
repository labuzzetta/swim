var L00004b02bba73d67897e = /* color: #ff0000 */ee.Geometry({
      "type": "GeometryCollection",
      "geometries": [
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -96.06846034526825,
                41.62719214082274
              ],
              [
                -96.06847107410431,
                41.62678514374091
              ],
              [
                -96.06820285320282,
                41.62678313882285
              ],
              [
                -96.06820285320282,
                41.62713600344699
              ],
              [
                -96.06815993785858,
                41.62717008685954
              ],
              [
                -96.06817871332169,
                41.62720216534901
              ],
              [
                -96.06822162866592,
                41.627222214396824
              ],
              [
                -96.06824845075607,
                41.62719013591733
              ],
              [
                -96.06843084096909,
                41.62719214082274
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -96.0666498541832,
                41.63098931983241
              ],
              [
                -96.0665962100029,
                41.63098931983241
              ],
              [
                -96.0665962100029,
                41.63095122886211
              ],
              [
                -96.06649696826935,
                41.63093318576305
              ],
              [
                -96.06648355722427,
                41.63101939163518
              ],
              [
                -96.06666594743729,
                41.63102941556631
              ],
              [
                -96.0666686296463,
                41.631009367702504
              ],
              [
                -96.06671690940857,
                41.63100535812897
              ],
              [
                -96.06673568487167,
                41.63096726716813
              ],
              [
                -96.06671690940857,
                41.63088507080754
              ],
              [
                -96.06667935848236,
                41.630955238439
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -96.06655195355415,
                41.630810893514116
              ],
              [
                -96.06660693883896,
                41.63079485516919
              ],
              [
                -96.06661766767502,
                41.63074473531554
              ],
              [
                -96.06653183698654,
                41.630750749700034
              ],
              [
                -96.06648087501526,
                41.63073671613534
              ],
              [
                -96.06647819280624,
                41.630698625015754
              ],
              [
                -96.06641113758087,
                41.630738720930474
              ],
              [
                -96.06636822223663,
                41.630762778467336
              ],
              [
                -96.06643259525299,
                41.63077881682026
              ],
              [
                -96.06642186641693,
                41.63081490309974
              ],
              [
                -96.0663977265358,
                41.630832946231905
              ],
              [
                -96.06639236211777,
                41.63092516660628
              ],
              [
                -96.06642723083496,
                41.63091414026412
              ],
              [
                -96.06643393637637,
                41.63083244501097
              ],
              [
                -96.06646209955215,
                41.63081390070336
              ],
              [
                -96.0665063560009,
                41.6308048791477
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -96.06638699769974,
                41.63095323365058
              ],
              [
                -96.06636822223663,
                41.63095323365058
              ],
              [
                -96.0663628578186,
                41.63105547777998
              ],
              [
                -96.0663253068924,
                41.63105748256522
              ],
              [
                -96.06632262468338,
                41.63109557347275
              ],
              [
                -96.06640577316284,
                41.6311035926083
              ],
              [
                -96.06640845537186,
                41.63106951127529
              ],
              [
                -96.06638699769974,
                41.63106550170549
              ],
              [
                -96.06639236211777,
                41.630995334194104
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -96.06663644313812,
                41.63106951127529
              ],
              [
                -96.06660157442093,
                41.631071516060075
              ],
              [
                -96.06658548116684,
                41.631091563904576
              ],
              [
                -96.06655061244965,
                41.63108955912043
              ],
              [
                -96.06655061244965,
                41.63111562130977
              ],
              [
                -96.06661766767502,
                41.6311015878245
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -96.06650769710541,
                41.6311015878245
              ],
              [
                -96.06646746397018,
                41.631097578256735
              ],
              [
                -96.06645941734314,
                41.63112163565966
              ],
              [
                -96.06649160385132,
                41.63112564522595
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -96.06658548116684,
                41.630883066016956
              ],
              [
                -96.06658279895782,
                41.63086903248108
              ],
              [
                -96.0665613412857,
                41.63086502289881
              ],
              [
                -96.06656402349472,
                41.63088908038853
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -96.05826526880264,
                41.6340305104543
              ],
              [
                -96.05836987495422,
                41.63399442597494
              ],
              [
                -96.05828136205673,
                41.63392626634773
              ],
              [
                -96.05836987495422,
                41.63387213953358
              ],
              [
                -96.05812311172485,
                41.63390421468817
              ],
              [
                -96.05806678533554,
                41.633850087855535
              ],
              [
                -96.05797290802002,
                41.633773909273295
              ],
              [
                -96.05782806873322,
                41.63376388576893
              ],
              [
                -96.05770736932755,
                41.633745843457156
              ],
              [
                -96.0576269030571,
                41.6338059844768
              ],
              [
                -96.05751156806946,
                41.6338059844768
              ],
              [
                -96.05747133493423,
                41.63386011134649
              ],
              [
                -96.05737209320068,
                41.633842069061636
              ],
              [
                -96.0572138428688,
                41.63381199857569
              ],
              [
                -96.05700463056564,
                41.633737824650304
              ],
              [
                -96.05700194835663,
                41.63379195157724
              ],
              [
                -96.05706363916397,
                41.633830040868936
              ],
              [
                -96.05726212263107,
                41.63388416771843
              ],
              [
                -96.0574123263359,
                41.633916242867045
              ],
              [
                -96.05747938156128,
                41.63396235086523
              ],
              [
                -96.05754375457764,
                41.6339783884221
              ],
              [
                -96.05761349201202,
                41.633956336780386
              ],
              [
                -96.05770736932755,
                41.6339904165871
              ],
              [
                -96.05782002210617,
                41.633980393116424
              ],
              [
                -96.05786293745041,
                41.634026501068696
              ],
              [
                -96.05796486139297,
                41.63401046352382
              ],
              [
                -96.0580587387085,
                41.633974379033255
              ],
              [
                -96.05814456939697,
                41.63393829452247
              ],
              [
                -96.0582035779953,
                41.63398440250488
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -96.05035543441772,
                41.63093719534106
              ],
              [
                -96.05062901973724,
                41.63075275449472
              ],
              [
                -96.05066657066345,
                41.63065251468299
              ],
              [
                -96.05053246021271,
                41.63063647629868
              ],
              [
                -96.05052173137665,
                41.630464063415005
              ],
              [
                -96.05062901973724,
                41.63036382315437
              ],
              [
                -96.05039834976196,
                41.630375851993854
              ],
              [
                -96.05011403560638,
                41.630191409541474
              ],
              [
                -96.04994237422943,
                41.629986918379544
              ],
              [
                -96.04985117912292,
                41.629802474814355
              ],
              [
                -96.04967951774597,
                41.629846580932295
              ],
              [
                -96.04967415332794,
                41.62997889910507
              ],
              [
                -96.04973316192627,
                41.63011121700625
              ],
              [
                -96.0497921705246,
                41.63021546728258
              ],
              [
                -96.04992091655731,
                41.63030768854032
              ],
              [
                -96.04991555213928,
                41.63040792888823
              ],
              [
                -96.05001211166382,
                41.63049213066005
              ],
              [
                -96.04989409446716,
                41.63077280243838
              ],
              [
                -96.04998528957367,
                41.63077681202637
              ],
              [
                -96.05017840862274,
                41.63070062981209
              ],
              [
                -96.0502427816391,
                41.630732706544855
              ],
              [
                -96.05022132396698,
                41.630877051644816
              ],
              [
                -96.05031788349152,
                41.63093719534106
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        }
      ],
      "coordinates": []
    });

//Change the following for each lake
var polygon = "00004b02bba73d67897e"
var train_date = ee.Date("2005-07-07")

print(L00004b02bba73d67897e.area())

//-------------Stays the same for each lake--------------//
//Find the polygon from the NRI database
var NRI = ee.FeatureCollection("users/chalab13/LWB_IA_all_years_geo"),
    NAIP = ee.ImageCollection("USDA/NAIP/DOQQ");

var predict_poly = NRI
  .filterMetadata("system:index", "equals", polygon)
  .geometry()

//Determine month and year of training date
var NAIP_range_year = ee.String(train_date.get('year'));
var NAIP_range_month = ee.String(ee.Algorithms.If(ee.Number(train_date.get('month')).lt(10),
          ee.String("0").cat(ee.String(train_date.get('month'))),
          ee.String(train_date.get('month'))));

//Function to calculate date for end of the month selected
//Non - GEE Functional version
var date_range = function(month, year) {
  var end_range = "";
  if(month == "09" || month == "04" || month == "06" || month == "11"){
    end_range = ee.String(year).cat("-").cat(month).cat("-").cat("30")
  } else {
    if(month == "02"){
      if(year % 4 === 0){
          end_range = ee.String(year).cat("-").cat(month).cat("-").cat("29")
      } else {
          end_range = ee.String(year).cat("-").cat(month).cat("-").cat("28")
      }
    } else {
      end_range = ee.String(year).cat("-").cat(month).cat("-").cat("31")
    }
  }
  return end_range
} // end function date_range()

//Produce a range of dates for the month of the NAIP image (1st through 30th of the month)
var NAIP_range_1 = NAIP_range_year.cat("-").cat(NAIP_range_month).cat("-").cat("01");
var NAIP_range_2 = date_range(NAIP_range_month.getInfo(), NAIP_range_year.getInfo());

//Collect NAIP images
var NAIP = NAIP
  .filterBounds(predict_poly)
  .filterDate(NAIP_range_1, NAIP_range_2)

//Add to map
Map.addLayer(predict_poly.buffer(800))
Map.addLayer(NAIP.select('R','G','B').mosaic().clip(predict_poly.buffer(800)))
Map.centerObject(NAIP, 14)
