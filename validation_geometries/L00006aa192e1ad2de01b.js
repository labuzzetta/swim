var L00006aa192e1ad2de01b = /* color: #ff00ff */ee.Geometry.MultiPolygon(
        [[[[-90.97573399543762, 40.93401394931096],
           [-90.97650647163391, 40.93352763214114],
           [-90.97697854042053, 40.93324394547224],
           [-90.97754716873169, 40.932944046812],
           [-90.97810506820679, 40.93260361965605],
           [-90.97870588302612, 40.93222266337794],
           [-90.97897410392761, 40.93208487014068],
           [-90.97911357879639, 40.93190654905404],
           [-90.97925305366516, 40.931914654568416],
           [-90.97983241081238, 40.93157422210838],
           [-90.9803581237793, 40.93124189349113],
           [-90.98092675209045, 40.93092577447467],
           [-90.98163485527039, 40.93000172560071],
           [-90.9817636013031, 40.9297666584744],
           [-90.98196744918823, 40.92945053239983],
           [-90.98213911056519, 40.928664263552754],
           [-90.9823751449585, 40.92809684723239],
           [-90.98233222961426, 40.92779692520899],
           [-90.98243951797485, 40.9274402594092],
           [-90.98246097564697, 40.92664586048168],
           [-90.98214983940125, 40.924684140589164],
           [-90.98167777061462, 40.923857282528246],
           [-90.9814202785492, 40.92401941237516],
           [-90.98121643066406, 40.92402751885709],
           [-90.98117351531982, 40.92393834750143],
           [-90.98098039627075, 40.92390592152409],
           [-90.98076581954956, 40.923816750004356],
           [-90.98071217536926, 40.923597873945845],
           [-90.98093748092651, 40.92302230751782],
           [-90.98104476928711, 40.922706149178005],
           [-90.97981095314026, 40.921619850023355],
           [-90.97949981689453, 40.92178198535909],
           [-90.9792959690094, 40.922033294343464],
           [-90.97878098487854, 40.921749558323775],
           [-90.97862005233765, 40.92186305287783],
           [-90.97909212112427, 40.92216300183249],
           [-90.97842693328857, 40.92251969611478],
           [-90.97811579704285, 40.92271425582099],
           [-90.97793340682983, 40.922552122772245],
           [-90.97765445709229, 40.92254401610936],
           [-90.97786903381348, 40.922665615948134],
           [-90.97763299942017, 40.92279532219621],
           [-90.9773862361908, 40.9230547339287],
           [-90.97726821899414, 40.92330603807357],
           [-90.97720384597778, 40.92343574306479],
           [-90.97741842269897, 40.923581660875634],
           [-90.97747206687927, 40.92380053698784],
           [-90.9774398803711, 40.92412479656238],
           [-90.9771716594696, 40.92448148025679],
           [-90.97704291343689, 40.9246760341878],
           [-90.97702145576477, 40.92482194926019],
           [-90.97645282745361, 40.92539750001517],
           [-90.97604513168335, 40.92585145200425],
           [-90.9757125377655, 40.92614327663629],
           [-90.97540140151978, 40.926289188469035],
           [-90.97497224807739, 40.92620812637951],
           [-90.97473621368408, 40.92597304575755],
           [-90.97444653511047, 40.925762283109655],
           [-90.9738564491272, 40.92552720090167],
           [-90.97307324409485, 40.92538128738645],
           [-90.97251534461975, 40.925300224183246],
           [-90.97152829170227, 40.92577849564489],
           [-90.9726333618164, 40.92547045679515],
           [-90.97318053245544, 40.925519094603736],
           [-90.97362041473389, 40.925624476399506],
           [-90.9741461277008, 40.925794708176156],
           [-90.97457528114319, 40.926086533058765],
           [-90.97477912902832, 40.92628108226456],
           [-90.97512245178223, 40.92640267522735],
           [-90.97541213035583, 40.92643509997962],
           [-90.97578763961792, 40.92635403806909],
           [-90.97613096237183, 40.92610274551446],
           [-90.97642064094543, 40.925827133226754],
           [-90.97679615020752, 40.92544613787744],
           [-90.97709655761719, 40.925105672089785],
           [-90.97735404968262, 40.924684140589164],
           [-90.97757935523987, 40.924230180581546],
           [-90.97776174545288, 40.92377621745561],
           [-90.9776759147644, 40.9236870457609],
           [-90.9779441356659, 40.9232249723248],
           [-90.97816944122314, 40.92309526691994],
           [-90.97827672958374, 40.92291692157259],
           [-90.97836256027222, 40.922860175224784],
           [-90.97858786582947, 40.92296556126049],
           [-90.97877025604248, 40.92311148010945],
           [-90.97887754440308, 40.92326550521163],
           [-90.9787380695343, 40.923695152283564],
           [-90.97888827323914, 40.92414911596633],
           [-90.9788990020752, 40.92459497011948],
           [-90.978684425354, 40.92519484187038],
           [-90.97841620445251, 40.925624476399506],
           [-90.97819089889526, 40.92594062077855],
           [-90.97777247428894, 40.92635403806909],
           [-90.97829818725586, 40.92611895796619],
           [-90.97883462905884, 40.92585145200425],
           [-90.97937107086182, 40.92568122037376],
           [-90.97966074943542, 40.92558394495948],
           [-90.98021864891052, 40.92518673553166],
           [-90.98020792007446, 40.92533264947646],
           [-90.97953200340271, 40.92588387702702],
           [-90.97886681556702, 40.926289188469035],
           [-90.97801923751831, 40.926775558918074],
           [-90.97735404968262, 40.92709980389535],
           [-90.97709655761719, 40.927294350118046],
           [-90.97681760787964, 40.92754563814132],
           [-90.97636699676514, 40.92782124326161],
           [-90.97595930099487, 40.92801578736032],
           [-90.97548723220825, 40.92822654282092],
           [-90.97501516342163, 40.92825896667825],
           [-90.97466111183167, 40.928340026252044],
           [-90.97423195838928, 40.92840487383946],
           [-90.97382426261902, 40.928518356964325],
           [-90.9733521938324, 40.92864805172548],
           [-90.97278356552124, 40.92885069928022],
           [-90.97251534461975, 40.9288831228313],
           [-90.97206473350525, 40.92906145207786],
           [-90.97151756286621, 40.92929652171299],
           [-90.97089529037476, 40.92949916727896],
           [-90.97041249275208, 40.92957211953057],
           [-90.96997261047363, 40.92961264852443],
           [-90.96950054168701, 40.92975855269652],
           [-90.96904993057251, 40.92988824502346],
           [-90.96853494644165, 40.930050360074155],
           [-90.96805214881897, 40.93011520598305],
           [-90.96767663955688, 40.930107100247916],
           [-90.9674084186554, 40.92992066806542],
           [-90.96755862236023, 40.9296774948629],
           [-90.96801996231079, 40.929337050875894],
           [-90.96856713294983, 40.928980393389075],
           [-90.96887826919556, 40.92874532262934],
           [-90.96866369247437, 40.928664263552754],
           [-90.96812725067139, 40.9289966051348],
           [-90.9678053855896, 40.929264098364776],
           [-90.96744060516357, 40.92959643692988],
           [-90.96733331680298, 40.92982339889182],
           [-90.96405029296875, 40.93215781953737],
           [-90.96493005752563, 40.93255498706201],
           [-90.96532702445984, 40.93283057128825],
           [-90.96624834389695, 40.93318824597976],
           [-90.96678343079782, 40.933335176623785],
           [-90.96723269111982, 40.93353073620229],
           [-90.96785361585529, 40.93371008267504],
           [-90.96816139707823, 40.9338159651958],
           [-90.96846917906112, 40.93387321520559],
           [-90.96891643695824, 40.93404393774182],
           [-90.96936369628895, 40.934084974443856],
           [-90.96987197752082, 40.934207572353706],
           [-90.9703802596415, 40.934200484246816],
           [-90.9707142002261, 40.93430281116359],
           [-90.97160604158279, 40.93434029305222],
           [-90.97232622214165, 40.9343696662801],
           [-90.97289619877779, 40.93431798376136],
           [-90.9731114499566, 40.93436610140487],
           [-90.97349836235992, 40.93428453479159],
           [-90.97391746074805, 40.93432049253981],
           [-90.9745296773549, 40.934178133058715],
           [-90.97499236227577, 40.9341446742107]]],
         [[[-90.96662521362305, 40.929839610430676],
           [-90.96649646759033, 40.929774764251306],
           [-90.96644282341003, 40.92919925162059],
           [-90.96664667129517, 40.92882638160648],
           [-90.96683979034424, 40.92830760243446],
           [-90.96678614616394, 40.92822654282092],
           [-90.96689343452454, 40.92803199934267],
           [-90.96706509590149, 40.928007681367646],
           [-90.96753716468811, 40.92756995628641],
           [-90.96782684326172, 40.92755374419068],
           [-90.96815943717957, 40.92731056227741],
           [-90.96834182739258, 40.92720518317043],
           [-90.96852421760559, 40.926953893852456],
           [-90.96956491470337, 40.92650805561409],
           [-90.97059488296509, 40.92607032059908],
           [-90.97130298614502, 40.92577038937777],
           [-90.97154974937439, 40.925762283109655],
           [-90.97249388694763, 40.92530833050802],
           [-90.97289085388184, 40.92506514033157],
           [-90.97378134727478, 40.92465171497774],
           [-90.9746503829956, 40.92417343536133],
           [-90.9754228591919, 40.92363840660398],
           [-90.97558379173279, 40.92361408701208],
           [-90.97658157348633, 40.92300609430643],
           [-90.97724676132202, 40.92259265607171],
           [-90.97761154174805, 40.9225115894479],
           [-90.9773325920105, 40.92250348278006],
           [-90.97736477851868, 40.92242241604689],
           [-90.97750425338745, 40.922268388979894],
           [-90.97855567932129, 40.921903586599896],
           [-90.97883462905884, 40.92173334480012],
           [-90.97942471504211, 40.92156310256189],
           [-90.97968220710754, 40.92148203467525],
           [-90.97952127456665, 40.921328005416726],
           [-90.97877025604248, 40.921465821086],
           [-90.97821235656738, 40.92159552968868],
           [-90.97761154174805, 40.92189547985745],
           [-90.97713947296143, 40.92210625483734],
           [-90.97667813301086, 40.92222785548155],
           [-90.97607731819153, 40.922576442754895],
           [-90.97597002983093, 40.92279532219621],
           [-90.97564816474915, 40.92300609430643],
           [-90.9752082824707, 40.92311148010945],
           [-90.9752082824707, 40.92291692157259],
           [-90.9753692150116, 40.92250348278006],
           [-90.97568035125732, 40.92243862940146],
           [-90.97602367401123, 40.92205761451705],
           [-90.97653865814209, 40.92165227712233],
           [-90.97707509994507, 40.92111722795495],
           [-90.97797632217407, 40.92049299845198],
           [-90.97718238830566, 40.920039009656016],
           [-90.97634553909302, 40.9198768700446],
           [-90.97534775733948, 40.91944719815085],
           [-90.97393155097961, 40.9191796651834],
           [-90.97368478775024, 40.919106701458894],
           [-90.9729015827179, 40.91899320217179],
           [-90.97217202186584, 40.918976987972],
           [-90.97151756286621, 40.91884727423057],
           [-90.97073435783386, 40.91893645245516],
           [-90.97018718719482, 40.918879702689786],
           [-90.96958637237549, 40.91900130927018],
           [-90.96882462501526, 40.919033737653855],
           [-90.96848130226135, 40.91916345102935],
           [-90.96810579299927, 40.919236414691206],
           [-90.96755862236023, 40.919390448823975],
           [-90.96706509590149, 40.91960123179241],
           [-90.96642136573792, 40.91977958608686],
           [-90.96895337104797, 40.92188737311403],
           [-90.96954345703125, 40.92145771428987],
           [-90.96988677978516, 40.92110101427619],
           [-90.97058415412903, 40.92048489153655],
           [-90.97161412239075, 40.9198768700446],
           [-90.97137808799744, 40.92040382232744],
           [-90.97106695175171, 40.921011838971985],
           [-90.97064852714539, 40.92187926636963],
           [-90.97036957740784, 40.92230892245337],
           [-90.97001552581787, 40.92271425582099],
           [-90.9696614742279, 40.92312769329502],
           [-90.96932888031006, 40.92349248891839],
           [-90.9689211845398, 40.92362219354372],
           [-90.96840620040894, 40.923719471845615],
           [-90.96759080886841, 40.923832963016885],
           [-90.96725821495056, 40.92382485651112],
           [-90.96706509590149, 40.92375189791445],
           [-90.96734404563904, 40.923362784038545],
           [-90.96806287765503, 40.922779108929134],
           [-90.96861004829407, 40.92237377595924],
           [-90.96874952316284, 40.92214678841028],
           [-90.96894264221191, 40.921903586599896],
           [-90.96637845039368, 40.919787693088786],
           [-90.96567034721375, 40.92011197235137],
           [-90.9646725654602, 40.920736205452855],
           [-90.96425414085388, 40.92096319784624],
           [-90.96388936042786, 40.92118208263017],
           [-90.96361041069031, 40.92142528709545],
           [-90.96329927444458, 40.92161174324612],
           [-90.96312761306763, 40.92182251913088],
           [-90.96258044242859, 40.922268388979894],
           [-90.96222639083862, 40.92276289565804],
           [-90.96204400062561, 40.92298177448186],
           [-90.96174359321594, 40.92330603807357],
           [-90.96166849136353, 40.92348438237087],
           [-90.96134662628174, 40.92393834750143],
           [-90.96113204956055, 40.92461118294111],
           [-90.96104621887207, 40.92473277897645],
           [-90.96100330352783, 40.92503271490709],
           [-90.96088528633118, 40.92525969254434],
           [-90.96089601516724, 40.92539750001517],
           [-90.96070289611816, 40.92602978943252],
           [-90.96073508262634, 40.92653237414104],
           [-90.9606921672821, 40.92676745277327],
           [-90.96076726913452, 40.9271079099994],
           [-90.96086382865906, 40.928023893352005],
           [-90.96106767654419, 40.928453509488264],
           [-90.96113204956055, 40.92876964033292],
           [-90.96142172813416, 40.929264098364776],
           [-90.96165776252747, 40.92985582196559],
           [-90.96187233924866, 40.93017194610114],
           [-90.96212983131409, 40.93039890608624],
           [-90.96223711967468, 40.93062586529174],
           [-90.96269845962524, 40.93096630263823],
           [-90.9632134437561, 40.93153369431771],
           [-90.96341729164124, 40.93165527761509],
           [-90.96372842788696, 40.93188223250495],
           [-90.96405029296875, 40.93215781953737],
           [-90.96731185913086, 40.929815293120896]]],
         [[[-90.97845911979675, 40.920736205452855],
           [-90.97841084003448, 40.92080916737859],
           [-90.9784483909607, 40.920886182657284],
           [-90.97877562046051, 40.9209145566847]]]]);   

//Change the following for each lake
var polygon = "00006aa192e1ad2de01b"
var train_date = ee.Date("2009-09-16")

print(L00006aa192e1ad2de01b.area())

//-------------Stays the same for each lake--------------//
//Find the polygon from the NRI database
var NRI = ee.FeatureCollection("users/chalab13/LWB_IA_all_years_geo"),
    NAIP = ee.ImageCollection("USDA/NAIP/DOQQ");

var predict_poly = NRI
  .filterMetadata("system:index", "equals", polygon)
  .geometry()

//Determine month and year of training date
var NAIP_range_year = ee.String(train_date.get('year'));
var NAIP_range_month = ee.String(ee.Algorithms.If(ee.Number(train_date.get('month')).lt(10),
          ee.String("0").cat(ee.String(train_date.get('month'))),
          ee.String(train_date.get('month'))));

//Function to calculate date for end of the month selected
//Non - GEE Functional version
var date_range = function(month, year) {
  var end_range = "";
  if(month == "09" || month == "04" || month == "06" || month == "11"){
    end_range = ee.String(year).cat("-").cat(month).cat("-").cat("30")
  } else {
    if(month == "02"){
      if(year % 4 === 0){
          end_range = ee.String(year).cat("-").cat(month).cat("-").cat("29")
      } else {
          end_range = ee.String(year).cat("-").cat(month).cat("-").cat("28")
      }
    } else {
      end_range = ee.String(year).cat("-").cat(month).cat("-").cat("31")
    }
  }
  return end_range
} // end function date_range()

//Produce a range of dates for the month of the NAIP image (1st through 30th of the month)
var NAIP_range_1 = NAIP_range_year.cat("-").cat(NAIP_range_month).cat("-").cat("01");
var NAIP_range_2 = date_range(NAIP_range_month.getInfo(), NAIP_range_year.getInfo());

//Collect NAIP images
var NAIP = NAIP
  .filterBounds(predict_poly)
  .filterDate(NAIP_range_1, NAIP_range_2)

//Add to map
Map.addLayer(predict_poly.buffer(800))
Map.addLayer(NAIP.select('R','G','B').mosaic().clip(predict_poly.buffer(800)))
Map.centerObject(NAIP, 14)
