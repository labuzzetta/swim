var L00003a8c2b22e5a60ef6 = /* color: #0000ff */ee.Geometry.MultiPolygon(
        [[[[-92.5207507610321, 42.044416708873925],
           [-92.52070784568787, 42.044257358447645],
           [-92.52072930335999, 42.04405816985273],
           [-92.52054691314697, 42.043946623966825],
           [-92.52063274383545, 42.04391475367773],
           [-92.52084732055664, 42.043946623966825],
           [-92.5210189819336, 42.04381914271456],
           [-92.5212013721466, 42.0437235316075],
           [-92.52151250839233, 42.0437235316075],
           [-92.52201676368713, 42.043739466802],
           [-92.52227425575256, 42.04376336958626],
           [-92.52259612083435, 42.04382711030031],
           [-92.522531747818, 42.04370759640899],
           [-92.52261757850647, 42.04364385557504],
           [-92.52270340919495, 42.04357214706038],
           [-92.52267122268677, 42.043436697423026],
           [-92.52263903617859, 42.04333311809374],
           [-92.52262830734253, 42.04318970028211],
           [-92.52241373062134, 42.04308612055017],
           [-92.52219915390015, 42.042958637571346],
           [-92.52213478088379, 42.042847089755035],
           [-92.52194166183472, 42.04271960629664],
           [-92.52172708511353, 42.04257618710017],
           [-92.52157688140869, 42.042369025467096],
           [-92.52157688140869, 42.04214592756841],
           [-92.5214695930481, 42.04196266799422],
           [-92.52062201499939, 42.04205031394346],
           [-92.51988172531128, 42.04214592756841],
           [-92.51904487609863, 42.04232121884045],
           [-92.51851916313171, 42.0425283806294],
           [-92.51832604408264, 42.042878960579685],
           [-92.51826167106628, 42.043078152871466],
           [-92.51803636550903, 42.043197667946814],
           [-92.51796662807465, 42.04297457295768],
           [-92.51788079738617, 42.042671799933785],
           [-92.51782715320587, 42.04231723495329],
           [-92.51790761947632, 42.042058281751046],
           [-92.51775205135345, 42.042058281751046],
           [-92.51766085624695, 42.04207023346055],
           [-92.51761794090271, 42.04197461972169],
           [-92.51750528812408, 42.04204633003929],
           [-92.51748919487, 42.042245524941414],
           [-92.51758575439453, 42.04249252575272],
           [-92.51765549182892, 42.042743509464565],
           [-92.51769304275513, 42.04293473448433],
           [-92.51765549182892, 42.04315384577863],
           [-92.51765012741089, 42.0433131989726],
           [-92.51771450042725, 42.04340084305894],
           [-92.51776278018951, 42.04345263268946],
           [-92.5177252292633, 42.043540276583464],
           [-92.51766622066498, 42.04360401752135],
           [-92.5175428390503, 42.04358808229285],
           [-92.51749455928802, 42.04351238990303],
           [-92.51745700836182, 42.04342076215259],
           [-92.51733362674713, 42.04341279451587],
           [-92.51723170280457, 42.04341677833435],
           [-92.51696348190308, 42.04358011467713],
           [-92.5167864561081, 42.043679709802],
           [-92.51673817634583, 42.04374743439775],
           [-92.51664698123932, 42.04370361260874],
           [-92.51647531986237, 42.043651823182785],
           [-92.51630902290344, 42.0436916612065],
           [-92.51616418361664, 42.0437275154065],
           [-92.5160300731659, 42.04384304546883],
           [-92.51593887805939, 42.04402629961962],
           [-92.51586377620697, 42.04412589404507],
           [-92.51571357250214, 42.044221504546634],
           [-92.51568138599396, 42.04434500123154],
           [-92.51568138599396, 42.0444924001864],
           [-92.51571893692017, 42.044659717504544],
           [-92.5158154964447, 42.04479516453458],
           [-92.51591742038727, 42.04488280657663],
           [-92.51608371734619, 42.04488280657663],
           [-92.51640558242798, 42.04486288794132],
           [-92.51675963401794, 42.04486288794132],
           [-92.51704394817352, 42.04488280657663],
           [-92.51743018627167, 42.044934594999184],
           [-92.5177788734436, 42.04500231825728],
           [-92.51820802688599, 42.04521743871597],
           [-92.51847088336945, 42.0453847541247],
           [-92.51866400241852, 42.04558792224291],
           [-92.51888394355774, 42.04556402014507],
           [-92.51896440982819, 42.045623775372796],
           [-92.51892149448395, 42.04571141627178],
           [-92.51892685890198, 42.04577913870183],
           [-92.51909852027893, 42.045882714043465],
           [-92.51947402954102, 42.04623725912685],
           [-92.51960813999176, 42.046444408147465],
           [-92.519651055336, 42.0465878186122],
           [-92.51971542835236, 42.046659523723186],
           [-92.51985490322113, 42.04668342540887],
           [-92.51972079277039, 42.04671131069745],
           [-92.51967251300812, 42.04681488451933],
           [-92.5195974111557, 42.04696626133986],
           [-92.51951158046722, 42.04708576910128],
           [-92.51937747001648, 42.04719730947578],
           [-92.51922190189362, 42.04732478394969],
           [-92.51911461353302, 42.04755981434039],
           [-92.51910924911499, 42.04782671220425],
           [-92.51916825771332, 42.047906382991094],
           [-92.51917898654938, 42.047986053677974],
           [-92.51917898654938, 42.04806970779169],
           [-92.51913607120514, 42.04815336179522],
           [-92.51913607120514, 42.04828880137694],
           [-92.51927554607391, 42.04844415818861],
           [-92.51948475837708, 42.04876682112195],
           [-92.51960277557373, 42.048958028012784],
           [-92.51966178417206, 42.04915720124538],
           [-92.51971542835236, 42.04922093654794],
           [-92.51973688602448, 42.049336456620786],
           [-92.51989245414734, 42.04950376118146],
           [-92.51993000507355, 42.04957546300116],
           [-92.51992464065552, 42.04985430264168],
           [-92.5199407339096, 42.05002957264637],
           [-92.5199407339096, 42.050153058041104],
           [-92.52005875110626, 42.05022475912789],
           [-92.51994609832764, 42.050153058041104],
           [-92.52010703086853, 42.05013314105818],
           [-92.5202625989914, 42.05016102483253],
           [-92.52036452293396, 42.05022874251921],
           [-92.52043426036835, 42.050300443520584],
           [-92.52033233642578, 42.05035222752678],
           [-92.52023041248322, 42.050388077967874],
           [-92.5202625989914, 42.050543429645494],
           [-92.52024114131927, 42.050662930677454],
           [-92.52022504806519, 42.05082226503697],
           [-92.52025723457336, 42.05094973223686],
           [-92.52033770084381, 42.051085165856435],
           [-92.52040207386017, 42.05110109920446],
           [-92.52052545547485, 42.051093132530944],
           [-92.52053618431091, 42.05115288255793],
           [-92.52036452293396, 42.05117279922111],
           [-92.52039134502411, 42.0512723824433],
           [-92.52038061618805, 42.051443665220276],
           [-92.52034306526184, 42.05162291414346],
           [-92.52033233642578, 42.05165876386737],
           [-92.52028405666351, 42.051690630271665],
           [-92.52030551433563, 42.051762329622846],
           [-92.52035915851593, 42.0518698784979],
           [-92.52028942108154, 42.05190174479628],
           [-92.52023577690125, 42.05198539375343],
           [-92.52023577690125, 42.052033193108066],
           [-92.5204449892044, 42.05204912621829],
           [-92.520552277565, 42.05209692552494],
           [-92.52065420150757, 42.052260239551345],
           [-92.52068638801575, 42.052387703865556],
           [-92.52077221870422, 42.05247135218272],
           [-92.52087950706482, 42.052531100913264],
           [-92.52097606658936, 42.05257889985723],
           [-92.52100825309753, 42.0526904305866],
           [-92.52099215984344, 42.0527740785051],
           [-92.52092778682709, 42.05288560889176],
           [-92.52091705799103, 42.052993155864826],
           [-92.52093315124512, 42.053128585127446],
           [-92.52102971076965, 42.05320028285544],
           [-92.52113163471222, 42.05326401410126],
           [-92.52112627029419, 42.05332774528315],
           [-92.52114236354828, 42.053435291507576],
           [-92.52121210098267, 42.05344724107683],
           [-92.52122819423676, 42.05333172847989],
           [-92.5212013721466, 42.05326401410126],
           [-92.52108335494995, 42.05318435003399],
           [-92.52097606658936, 42.053096719444554],
           [-92.52098143100739, 42.05285374308697],
           [-92.52104043960571, 42.05281391080854],
           [-92.52109944820404, 42.052754162344044],
           [-92.52109944820404, 42.052682464112436],
           [-92.52106726169586, 42.052574916613295],
           [-92.52099752426147, 42.05248728518303],
           [-92.52086877822876, 42.05240762014153],
           [-92.52077758312225, 42.0523399047777],
           [-92.52074539661407, 42.05215667460772],
           [-92.52063274383545, 42.05200531015558],
           [-92.52063274383545, 42.05188581164908],
           [-92.52067029476166, 42.051810129145366],
           [-92.52077758312225, 42.05172647995739],
           [-92.52086341381073, 42.05167469707152],
           [-92.52089560031891, 42.05160299762141],
           [-92.52098679542542, 42.05151934816065],
           [-92.52106189727783, 42.051443665220276],
           [-92.52114236354828, 42.05140383205754],
           [-92.52117455005646, 42.051292299069004],
           [-92.52119064331055, 42.051132965888506],
           [-92.52118527889252, 42.05099354902772],
           [-92.52124428749084, 42.05091786546085],
           [-92.52129793167114, 42.05078243148455],
           [-92.52135157585144, 42.05065496394897],
           [-92.52133548259735, 42.05060716355718],
           [-92.52131402492523, 42.050543429645494],
           [-92.52136766910553, 42.05046774554232],
           [-92.52135694026947, 42.050380111204944],
           [-92.52137839794159, 42.05031239367961],
           [-92.52133011817932, 42.050244676082094],
           [-92.5213623046875, 42.05014509124869],
           [-92.52137303352356, 42.05000965562473],
           [-92.5213623046875, 42.049814468482246],
           [-92.52140522003174, 42.049706916127036],
           [-92.5214159488678, 42.049571479568854],
           [-92.52140522003174, 42.04944002616269],
           [-92.52136766910553, 42.04926077107954],
           [-92.52128720283508, 42.049093465878876],
           [-92.52120673656464, 42.04896599495408],
           [-92.52115309238434, 42.04881860637839],
           [-92.52112090587616, 42.04870308536376],
           [-92.52102434635162, 42.0486433330324],
           [-92.52101361751556, 42.048491960208075],
           [-92.52098679542542, 42.048320669471856],
           [-92.52090096473694, 42.0481812464386],
           [-92.52089023590088, 42.04797410308131],
           [-92.52092778682709, 42.04788248176551],
           [-92.52102434635162, 42.047707205836666],
           [-92.52119600772858, 42.04762753480007],
           [-92.52142667770386, 42.04758371568734],
           [-92.52162516117096, 42.047595666357445],
           [-92.52183973789215, 42.047651436121555],
           [-92.52198994159698, 42.04767932098523],
           [-92.52208650112152, 42.04764745256857],
           [-92.52219915390015, 42.047655419674264],
           [-92.5222635269165, 42.04771915648356],
           [-92.52244591712952, 42.04773907422335],
           [-92.52265512943268, 42.04774704131752],
           [-92.5227677822113, 42.047707205836666],
           [-92.52286434173584, 42.04769127163735],
           [-92.52296090126038, 42.04776297550285],
           [-92.52310037612915, 42.047794843861546],
           [-92.52319693565369, 42.04784264636962],
           [-92.5233256816864, 42.04786256407069],
           [-92.5234866142273, 42.04786256407069],
           [-92.52356171607971, 42.04781077803489],
           [-92.52369046211243, 42.047687288086905],
           [-92.52370119094849, 42.047500060933665],
           [-92.52363681793213, 42.04730884965444],
           [-92.52351343631744, 42.04718934231268],
           [-92.52333641052246, 42.04701008087849],
           [-92.52318620681763, 42.04687862217194],
           [-92.5230360031128, 42.0467670812379],
           [-92.52255320549011, 42.04660375308831],
           [-92.52232789993286, 42.04654399878233],
           [-92.52215087413788, 42.04649221167166],
           [-92.52201676368713, 42.046444408147465],
           [-92.5219577550888, 42.04632888281543],
           [-92.52193093299866, 42.0462053899868],
           [-92.52179682254791, 42.04616953718512],
           [-92.5217056274414, 42.04610181517124],
           [-92.52167344093323, 42.04601417481081],
           [-92.52163589000702, 42.04581897539168],
           [-92.52159297466278, 42.045591905925],
           [-92.52147495746613, 42.04538077042961],
           [-92.52129793167114, 42.04515369939675],
           [-92.5211638212204, 42.04499036709933],
           [-92.52095460891724, 42.044759310937074],
           [-92.52083659172058, 42.044607928857914]]],
         [[[-92.52458095550537, 42.048384405613696],
           [-92.52472043037415, 42.048384405613696],
           [-92.52473652362823, 42.048332620003315],
           [-92.52465069293976, 42.048320669471856],
           [-92.52465605735779, 42.04822506513917],
           [-92.52472579479218, 42.04826490029528],
           [-92.52479553222656, 42.04829676840218],
           [-92.52480626106262, 42.04833660351329],
           [-92.52485990524292, 42.04833660351329],
           [-92.52485454082489, 42.048280834350734],
           [-92.52490282058716, 42.04826490029528],
           [-92.52491891384125, 42.04820514755174],
           [-92.52502083778381, 42.048213114587455],
           [-92.52509593963623, 42.04816929587865],
           [-92.52510666847229, 42.04806572426496],
           [-92.52505838871002, 42.04799402074118],
           [-92.52497255802155, 42.04791435006427],
           [-92.52485454082489, 42.047858580530956],
           [-92.52476334571838, 42.0479621524824],
           [-92.52462923526764, 42.048009954864575],
           [-92.52451658248901, 42.04803783957087],
           [-92.52451121807098, 42.0481214936164],
           [-92.52442002296448, 42.04816531235818],
           [-92.52448439598083, 42.04822506513917],
           [-92.52442002296448, 42.04827685083724],
           [-92.524334192276, 42.04826091678079],
           [-92.52432346343994, 42.04829676840218],
           [-92.52440392971039, 42.04833660351329],
           [-92.52444684505463, 42.048384405613696],
           [-92.52446830272675, 42.04830871893813],
           [-92.52453804016113, 42.0482409992046],
           [-92.52457559108734, 42.04820116403351],
           [-92.52456486225128, 42.04830871893813]]],
         [[[-92.52448439598083, 42.04861146509936],
           [-92.52469897270203, 42.04861146509936],
           [-92.52472043037415, 42.04857163016059],
           [-92.52482235431671, 42.04853577869432],
           [-92.52482771873474, 42.048507894206594],
           [-92.52468287944794, 42.048523828201084],
           [-92.52453804016113, 42.04851187770558],
           [-92.52445757389069, 42.04847204270433],
           [-92.52440929412842, 42.0484202571654],
           [-92.52432882785797, 42.04843220767812],
           [-92.52430737018585, 42.04848399320735],
           [-92.52426445484161, 42.04850391070732],
           [-92.52432882785797, 42.04854772918532],
           [-92.52432346343994, 42.0485875641391],
           [-92.52439320087433, 42.04858358064484]]],
         [[[-92.52419471740723, 42.04856764666533],
           [-92.52419471740723, 42.048507894206594],
           [-92.52414107322693, 42.04848797670784],
           [-92.5240820646286, 42.048428224174145],
           [-92.52408742904663, 42.04838042210672],
           [-92.52415180206299, 42.04832465298261],
           [-92.52417325973511, 42.04826091678079],
           [-92.52416253089905, 42.04819718051503],
           [-92.52403914928436, 42.04818522995808],
           [-92.52401769161224, 42.0482330321724],
           [-92.52410352230072, 42.04824498272034],
           [-92.52410888671875, 42.0483007519144],
           [-92.52406597137451, 42.048360504568016],
           [-92.52398550510406, 42.04836847158424],
           [-92.52401232719421, 42.048440174685375],
           [-92.52390503883362, 42.04843619118187],
           [-92.52391040325165, 42.048507894206594],
           [-92.52395331859589, 42.04857163016059],
           [-92.52402305603027, 42.0485915476331],
           [-92.52423763275146, 42.04859553112685]]],
         [[[-92.52709686756134, 42.048866408116055],
           [-92.5270164012909, 42.04878673853326],
           [-92.52694129943848, 42.04871105233705],
           [-92.52691984176636, 42.048603498113614],
           [-92.52688765525818, 42.04853577869432],
           [-92.52681255340576, 42.04847602620559],
           [-92.52675354480743, 42.04851984470283],
           [-92.5266945362091, 42.04846009219911],
           [-92.5266569852829, 42.04855967967409],
           [-92.52661943435669, 42.04860748160661],
           [-92.52666234970093, 42.04865926699293],
           [-92.52672135829926, 42.0486313825594],
           [-92.52675354480743, 42.04873096976585],
           [-92.52682328224182, 42.04879470549603],
           [-92.52695202827454, 42.0488026724578],
           [-92.52704858779907, 42.048854457685024]]],
         [[[-92.52638876438141, 42.04895006107047],
           [-92.52643167972565, 42.0489261602376],
           [-92.52639949321747, 42.048890308971416],
           [-92.52636194229126, 42.048842507251706],
           [-92.52629220485687, 42.04878275505149],
           [-92.52622783184052, 42.048842507251706],
           [-92.52620100975037, 42.04888632549616],
           [-92.52627074718475, 42.04892217676459],
           [-92.52627611160278, 42.049005829645544],
           [-92.52639949321747, 42.04901379658086]]],
         [[[-92.52198994159698, 42.05386945774725],
           [-92.52197921276093, 42.05381767660849],
           [-92.52205431461334, 42.05378979443935],
           [-92.52212941646576, 42.05382962610581],
           [-92.52209186553955, 42.053765895427524],
           [-92.52203285694122, 42.05370216468527],
           [-92.52187192440033, 42.05370216468527],
           [-92.52189338207245, 42.053654366586635],
           [-92.52205431461334, 42.05362250116755],
           [-92.52215623855591, 42.05350300570361],
           [-92.52217769622803, 42.05342732512683],
           [-92.52200603485107, 42.05341935874508],
           [-92.5219202041626, 42.05344724107683],
           [-92.52174317836761, 42.05349902251761],
           [-92.52143740653992, 42.05362250116755],
           [-92.52133548259735, 42.05367428246542],
           [-92.52135157585144, 42.05382962610581],
           [-92.5214159488678, 42.05390530620322],
           [-92.52193093299866, 42.053917255684055]]],
         [[[-92.52229571342468, 42.05394115463894],
           [-92.52214014530182, 42.053953104113006],
           [-92.52213478088379, 42.05418412683661],
           [-92.52207040786743, 42.05424387395593],
           [-92.5220274925232, 42.054299637883275],
           [-92.52210795879364, 42.054339469229966],
           [-92.52210795879364, 42.05445497999412],
           [-92.52219378948212, 42.05452269310302],
           [-92.52229034900665, 42.05458243990387],
           [-92.52241909503937, 42.05460235549165],
           [-92.52253711223602, 42.05462625418877],
           [-92.52260684967041, 42.05465811910424],
           [-92.52253711223602, 42.05456252430984],
           [-92.52247273921967, 42.054518709980954],
           [-92.52239227294922, 42.054518709980954],
           [-92.52229034900665, 42.05450277749025],
           [-92.52229034900665, 42.05441913184842],
           [-92.52233326435089, 42.054339469229966],
           [-92.52239227294922, 42.05425184023428],
           [-92.52240836620331, 42.05418014369331],
           [-92.52241909503937, 42.054132345954386],
           [-92.5223171710968, 42.05410446392339],
           [-92.52230644226074, 42.053996918832055]]]]);


//Change the following for each lake
var polygon = "00003a8c2b22e5a60ef6"
var train_date = ee.Date("2005-07-17")

print(L00003a8c2b22e5a60ef6.area())

//-------------Stays the same for each lake--------------//
//Find the polygon from the NRI database
var NRI = ee.FeatureCollection("users/chalab13/LWB_IA_all_years_geo"),
   NAIP = ee.ImageCollection("USDA/NAIP/DOQQ");

var predict_poly = NRI
 .filterMetadata("system:index", "equals", polygon)
 .geometry()

//Determine month and year of training date
var NAIP_range_year = ee.String(train_date.get('year'));
var NAIP_range_month = ee.String(ee.Algorithms.If(ee.Number(train_date.get('month')).lt(10),
         ee.String("0").cat(ee.String(train_date.get('month'))),
         ee.String(train_date.get('month'))));

//Function to calculate date for end of the month selected
//Non - GEE Functional version
var date_range = function(month, year) {
 var end_range = "";
 if(month == "09" || month == "04" || month == "06" || month == "11"){
   end_range = ee.String(year).cat("-").cat(month).cat("-").cat("30")
 } else {
   if(month == "02"){
     if(year % 4 === 0){
         end_range = ee.String(year).cat("-").cat(month).cat("-").cat("29")
     } else {
         end_range = ee.String(year).cat("-").cat(month).cat("-").cat("28")
     }
   } else {
     end_range = ee.String(year).cat("-").cat(month).cat("-").cat("31")
   }
 }
 return end_range
} // end function date_range()

//Produce a range of dates for the month of the NAIP image (1st through 30th of the month)
var NAIP_range_1 = NAIP_range_year.cat("-").cat(NAIP_range_month).cat("-").cat("01");
var NAIP_range_2 = date_range(NAIP_range_month.getInfo(), NAIP_range_year.getInfo());

//Collect NAIP images
var NAIP = NAIP
 .filterBounds(predict_poly)
 .filterDate(NAIP_range_1, NAIP_range_2)

//Add to map
Map.addLayer(predict_poly.buffer(800))
Map.addLayer(NAIP.select('R','G','B').mosaic().clip(predict_poly.buffer(800)))
Map.centerObject(NAIP, 14)
