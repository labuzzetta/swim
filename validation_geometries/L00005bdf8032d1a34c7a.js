var L00005bdf8032d1a34c7a = /* color: #009999 */ee.Geometry.MultiPolygon(
        [[[[-91.31274819374084, 40.62813033156639],
           [-91.31263017654419, 40.62776391048118],
           [-91.31255507469177, 40.62729977422039],
           [-91.31240487098694, 40.62699849106144],
           [-91.31231904029846, 40.62674606358453],
           [-91.31226539611816, 40.62655877806576],
           [-91.31215810775757, 40.62641220642383],
           [-91.31210446357727, 40.62615163382174],
           [-91.31176114082336, 40.62568748635596],
           [-91.31167531013489, 40.625443196920415],
           [-91.31149291992188, 40.62532105186759],
           [-91.31116032600403, 40.624718466337605],
           [-91.31097793579102, 40.62457189065689],
           [-91.31087064743042, 40.624384599041214],
           [-91.30941152572632, 40.62319569218911],
           [-91.30914330482483, 40.623097972876515],
           [-91.30898237228394, 40.62294325033922],
           [-91.30811333656311, 40.62256051410182],
           [-91.3079845905304, 40.62247093721889],
           [-91.30713701248169, 40.6220800548695],
           [-91.30684733390808, 40.62204748123715],
           [-91.30667567253113, 40.621949760244746],
           [-91.30455136299133, 40.621510014009715],
           [-91.30433678627014, 40.62152630095894],
           [-91.30402565002441, 40.62147744009939],
           [-91.30314588546753, 40.621493727056524],
           [-91.30277037620544, 40.6214530096562],
           [-91.30186915397644, 40.62150187053361],
           [-91.30113959312439, 40.62157516178277],
           [-91.30089282989502, 40.621640309492285],
           [-91.29836082458496, 40.62189275626648],
           [-91.2978994846344, 40.62199862075881],
           [-91.29727721214294, 40.6220800548695],
           [-91.29671931266785, 40.62226735294735],
           [-91.29637598991394, 40.622332499981745],
           [-91.29623651504517, 40.62240579031953],
           [-91.29581809043884, 40.62247908057686],
           [-91.29539966583252, 40.62273152418104],
           [-91.29488468170166, 40.622861817280885],
           [-91.29438042640686, 40.62322012199491],
           [-91.29360795021057, 40.62360285445272],
           [-91.2933075428009, 40.62390415292985],
           [-91.29302859306335, 40.62408330273138],
           [-91.2937581539154, 40.62470218016673],
           [-91.29388689994812, 40.624987187583436],
           [-91.29435896873474, 40.62537805292004],
           [-91.29495978355408, 40.62589106020297],
           [-91.29566788673401, 40.62654249234364],
           [-91.29631161689758, 40.627169489777906],
           [-91.29646182060242, 40.627226489252756],
           [-91.29706263542175, 40.627772053193794],
           [-91.2977921962738, 40.627601056020175],
           [-91.29799604415894, 40.6275684850803],
           [-91.29798531532288, 40.62772319690315],
           [-91.29718065261841, 40.62790233646077],
           [-91.29785656929016, 40.6285863194425],
           [-91.29796385765076, 40.62878988445337],
           [-91.2983500957489, 40.6290748744261],
           [-91.29884362220764, 40.62935986318264],
           [-91.29932641983032, 40.62952271335458],
           [-91.29934787750244, 40.62925401035789],
           [-91.29955172538757, 40.629172584993924],
           [-91.29964828491211, 40.629197012613545],
           [-91.29958391189575, 40.6296285657534],
           [-91.29970192909241, 40.629636708238664],
           [-91.2997555732727, 40.62931100805361],
           [-91.29974484443665, 40.628895738013796],
           [-91.30001306533813, 40.62883873996363],
           [-91.3003671169281, 40.628659602917885],
           [-91.30063533782959, 40.62857003421482],
           [-91.30091428756714, 40.6285618915995],
           [-91.30130052566528, 40.6286433177081],
           [-91.30170822143555, 40.62869217332559],
           [-91.30259871482849, 40.6286026046662],
           [-91.30259871482849, 40.62869217332559],
           [-91.2998628616333, 40.62894459344663],
           [-91.29987359046936, 40.629213297688324],
           [-91.30004525184631, 40.6293924332488],
           [-91.30024909973145, 40.629408718275926],
           [-91.30022764205933, 40.629099302081464],
           [-91.30033493041992, 40.629099302081464],
           [-91.30039930343628, 40.62930286552862],
           [-91.30027055740356, 40.62934357814361],
           [-91.30044221878052, 40.62954714084614],
           [-91.30050659179688, 40.62941686078799],
           [-91.30086064338684, 40.62953899834993],
           [-91.30086064338684, 40.62966927816979],
           [-91.30101084709167, 40.6296529932062],
           [-91.30094647407532, 40.629091159530674],
           [-91.30117177963257, 40.62911558718009],
           [-91.30123615264893, 40.6296285657534],
           [-91.30128979682922, 40.62953899834993],
           [-91.30166530609131, 40.62951457085542],
           [-91.30176186561584, 40.62956342583553],
           [-91.30147218704224, 40.629026019088606],
           [-91.3018798828125, 40.62894459344663],
           [-91.30192279815674, 40.62953899834993],
           [-91.30205154418945, 40.62953899834993],
           [-91.30203008651733, 40.62944128831827],
           [-91.30239486694336, 40.629408718275926],
           [-91.30239486694336, 40.62948200084883],
           [-91.3024914264679, 40.62945757333346],
           [-91.302330493927, 40.62894459344663],
           [-91.30269527435303, 40.628895738013796],
           [-91.30269527435303, 40.629408718275926],
           [-91.30337119102478, 40.629294723002644],
           [-91.30322098731995, 40.628814312212974],
           [-91.30326390266418, 40.6286433177081],
           [-91.30341410636902, 40.6286026046662],
           [-91.30477666854858, 40.6285618915995],
           [-91.30767345428467, 40.62845603750988],
           [-91.3127589225769, 40.628293184736705]]],
         [[[-91.2991601228714, 40.6296529932062],
           [-91.29868805408478, 40.62944128831827],
           [-91.29830718040466, 40.62920108388261],
           [-91.29797458648682, 40.62898123499781],
           [-91.29781365394592, 40.62886316770538],
           [-91.29763662815094, 40.62863517510169],
           [-91.2974488735199, 40.62846825145187],
           [-91.29740059375763, 40.628517107197446],
           [-91.29731476306915, 40.62852524981823],
           [-91.29726111888885, 40.62849675064113],
           [-91.29695534706116, 40.628724743717406],
           [-91.29696071147919, 40.62878988445337],
           [-91.29687488079071, 40.62876138538921],
           [-91.29652082920074, 40.62896902114963],
           [-91.29652619361877, 40.62903823292633],
           [-91.29641354084015, 40.629021947808845],
           [-91.29605412483215, 40.62926622415393],
           [-91.29610776901245, 40.62932729310058],
           [-91.29594147205353, 40.62939650450594],
           [-91.29589855670929, 40.629351720663614],
           [-91.29522800445557, 40.6296774206501],
           [-91.29525482654572, 40.62972220427401],
           [-91.29514753818512, 40.629738489220706],
           [-91.29512071609497, 40.629701848085034],
           [-91.29446625709534, 40.63010897068533],
           [-91.29447162151337, 40.630174110071025],
           [-91.2944233417511, 40.63021889336184],
           [-91.29434823989868, 40.630178181280534],
           [-91.29432678222656, 40.63011711311202],
           [-91.29441797733307, 40.630068258536994],
           [-91.29446625709534, 40.630096757043454],
           [-91.29513144493103, 40.62968963436869],
           [-91.29514217376709, 40.629636708238664],
           [-91.2952333688736, 40.62966520692927],
           [-91.29590928554535, 40.62934357814361],
           [-91.2959361076355, 40.62927843794773],
           [-91.29605948925018, 40.62926622415393],
           [-91.29642426967621, 40.62901380524862],
           [-91.29645109176636, 40.62894866473108],
           [-91.29651010036469, 40.62894866473108],
           [-91.29688024520874, 40.62875731409333],
           [-91.29690170288086, 40.62870845852349],
           [-91.29695534706116, 40.62872881501526],
           [-91.29726111888885, 40.628492679329106],
           [-91.29732549190521, 40.62844789488067],
           [-91.29740595817566, 40.628451966195385],
           [-91.29744350910187, 40.62843160961923],
           [-91.29693925380707, 40.62796747799894],
           [-91.29591464996338, 40.628150688234406],
           [-91.29576444625854, 40.62810997489217],
           [-91.29585027694702, 40.62799190605938],
           [-91.296746134758, 40.627841266211036],
           [-91.29622042179108, 40.6273323452913],
           [-91.29579663276672, 40.626929277170774],
           [-91.29530310630798, 40.62650584945439],
           [-91.29487931728363, 40.62610277634566],
           [-91.29421949386597, 40.62547984039273],
           [-91.29370987415314, 40.62505640348678],
           [-91.29342555999756, 40.624783610981325],
           [-91.29283010959625, 40.62423802262782],
           [-91.29227221012115, 40.6248202548155],
           [-91.29185378551483, 40.625186692051464],
           [-91.29171431064606, 40.625451339916],
           [-91.29143536090851, 40.62576077301236],
           [-91.29132270812988, 40.62598063249909],
           [-91.2911993265152, 40.62611091926081],
           [-91.29099011421204, 40.62671756364814],
           [-91.29079699516296, 40.62705141928238],
           [-91.29076480865479, 40.627165418385005],
           [-91.29072189331055, 40.62721834647363],
           [-91.29072189331055, 40.6273323452913],
           [-91.29057168960571, 40.627637698308526],
           [-91.29050195217133, 40.6279471212751],
           [-91.29047513008118, 40.62805704751018],
           [-91.29048585891724, 40.628720672419306],
           [-91.29042148590088, 40.629021947808845],
           [-91.29038393497467, 40.629270295418785],
           [-91.29040539264679, 40.629571568328736],
           [-91.29045903682709, 40.62995426438963],
           [-91.29051804542542, 40.630096757043454],
           [-91.29050195217133, 40.63029624624798],
           [-91.29057705402374, 40.63056087386497],
           [-91.29065752029419, 40.63077257520351],
           [-91.29072189331055, 40.631086054799006],
           [-91.2908399105072, 40.63133846587128],
           [-91.29085063934326, 40.6314524576557],
           [-91.29096329212189, 40.63159087598943],
           [-91.29101693630219, 40.6318066451727],
           [-91.2913066148758, 40.63170486734295],
           [-91.2915050983429, 40.63168451175836],
           [-91.29178404808044, 40.63157866261859],
           [-91.29209518432617, 40.63148909783079],
           [-91.2923526763916, 40.63144024425951],
           [-91.2927657365799, 40.63134253700977],
           [-91.29332900047302, 40.63124890076129],
           [-91.29359185695648, 40.63120818930795],
           [-91.29383862018585, 40.630980204710546],
           [-91.29430532455444, 40.630776646376525],
           [-91.29445552825928, 40.6306463687171],
           [-91.29474520683289, 40.63056901623656],
           [-91.29502952098846, 40.63052016199215],
           [-91.29515826702118, 40.63050794842546],
           [-91.29530847072601, 40.63069929404689],
           [-91.29537284374237, 40.630695222869164],
           [-91.29538357257843, 40.630528304368696],
           [-91.29561960697174, 40.63039802622476],
           [-91.2958824634552, 40.63026367662262],
           [-91.29630088806152, 40.63015375401984],
           [-91.2967997789383, 40.63007640096865],
           [-91.2973040342331, 40.62999090538678],
           [-91.29772782325745, 40.62994612194306],
           [-91.29808723926544, 40.62986876865138],
           [-91.2982052564621, 40.62973441798441],
           [-91.29852175712585, 40.62977105910219],
           [-91.29870414733887, 40.629718133036725],
           [-91.2988007068634, 40.629787344037005],
           [-91.29898309707642, 40.62973441798441]]]]);


//Change the following for each lake
var polygon = "00005bdf8032d1a34c7a"
var train_date = ee.Date("2009-09-16")

print(L00005bdf8032d1a34c7a.area())

//-------------Stays the same for each lake--------------//
//Find the polygon from the NRI database
var NRI = ee.FeatureCollection("users/chalab13/LWB_IA_all_years_geo"),
    NAIP = ee.ImageCollection("USDA/NAIP/DOQQ");

var predict_poly = NRI
  .filterMetadata("system:index", "equals", polygon)
  .geometry()

//Determine month and year of training date
var NAIP_range_year = ee.String(train_date.get('year'));
var NAIP_range_month = ee.String(ee.Algorithms.If(ee.Number(train_date.get('month')).lt(10),
          ee.String("0").cat(ee.String(train_date.get('month'))),
          ee.String(train_date.get('month'))));

//Function to calculate date for end of the month selected
//Non - GEE Functional version
var date_range = function(month, year) {
  var end_range = "";
  if(month == "09" || month == "04" || month == "06" || month == "11"){
    end_range = ee.String(year).cat("-").cat(month).cat("-").cat("30")
  } else {
    if(month == "02"){
      if(year % 4 === 0){
          end_range = ee.String(year).cat("-").cat(month).cat("-").cat("29")
      } else {
          end_range = ee.String(year).cat("-").cat(month).cat("-").cat("28")
      }
    } else {
      end_range = ee.String(year).cat("-").cat(month).cat("-").cat("31")
    }
  }
  return end_range
} // end function date_range()

//Produce a range of dates for the month of the NAIP image (1st through 30th of the month)
var NAIP_range_1 = NAIP_range_year.cat("-").cat(NAIP_range_month).cat("-").cat("01");
var NAIP_range_2 = date_range(NAIP_range_month.getInfo(), NAIP_range_year.getInfo());

//Collect NAIP images
var NAIP = NAIP
  .filterBounds(predict_poly)
  .filterDate(NAIP_range_1, NAIP_range_2)

//Add to map
Map.addLayer(predict_poly.buffer(800))
Map.addLayer(NAIP.select('R','G','B').mosaic().clip(predict_poly.buffer(800)))
Map.centerObject(NAIP, 14)
