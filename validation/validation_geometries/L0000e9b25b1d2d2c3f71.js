var L0000e9b25b1d2d2c3f71 = /* color: #0b4a8b */ee.Geometry.MultiPolygon(
        [[[[-90.81258058547974, 41.45740634712901],
           [-90.81265032291412, 41.45702441247632],
           [-90.8125752210617, 41.456686699962475],
           [-90.81260740756989, 41.45632486317492],
           [-90.81244647502899, 41.45591075859662],
           [-90.81243574619293, 41.45560922447323],
           [-90.81231772899628, 41.455388098558494],
           [-90.81223726272583, 41.45501419302399],
           [-90.81204950809479, 41.454704613692314],
           [-90.81192076206207, 41.45433874530451],
           [-90.8116364479065, 41.453980915984026],
           [-90.81150233745575, 41.453695455223],
           [-90.81130921840668, 41.45351854933216],
           [-90.81109464168549, 41.453184839179166],
           [-90.81078886985779, 41.45290741617887],
           [-90.81054210662842, 41.45259380614121],
           [-90.8101236820221, 41.45230431860686],
           [-90.8099091053009, 41.452042974584344],
           [-90.80963015556335, 41.45191833321819],
           [-90.80932438373566, 41.4516248219583],
           [-90.809206366539, 41.451600697686104],
           [-90.80878794193268, 41.45154038696636],
           [-90.80832660198212, 41.45147203474953],
           [-90.80778479576111, 41.45141574463453],
           [-90.80721616744995, 41.45140770318554],
           [-90.80674409866333, 41.4513835788326],
           [-90.80608427524567, 41.451371516652756],
           [-90.80480754375458, 41.45129914352664],
           [-90.80403506755829, 41.451266977666926],
           [-90.80335915088654, 41.4512549154654],
           [-90.8025974035263, 41.45124285326165],
           [-90.80201804637909, 41.45123883252655],
           [-90.80115973949432, 41.45118254220922],
           [-90.79979181289673, 41.45115841777254],
           [-90.79881012439728, 41.45114635555082],
           [-90.79827904701233, 41.45114233480977],
           [-90.7971203327179, 41.451186562947775],
           [-90.79682528972626, 41.451371516652756],
           [-90.796058177948, 41.45174142248082],
           [-90.79578995704651, 41.45201482978065],
           [-90.79543590545654, 41.45220782247502],
           [-90.79492628574371, 41.452770714554006],
           [-90.79435229301453, 41.45328937507441],
           [-90.79416453838348, 41.45361504351425],
           [-90.79390168190002, 41.45389648405877],
           [-90.7937353849411, 41.45426637548882],
           [-90.79362273216248, 41.45453173108494],
           [-90.79326868057251, 41.45513882844165],
           [-90.79320430755615, 41.455484589959426],
           [-90.79306483268738, 41.455810247377904],
           [-90.79302728176117, 41.45651382263802],
           [-90.79295754432678, 41.45690380106609],
           [-90.79309701919556, 41.45692390298335],
           [-90.79330623149872, 41.456931943748536],
           [-90.79351544380188, 41.456984208697826],
           [-90.79374611377716, 41.45695606603805],
           [-90.7939875125885, 41.45697214755942],
           [-90.79421281814575, 41.45706863660388],
           [-90.79439520835876, 41.4571771866073],
           [-90.79445421695709, 41.456984208697826],
           [-90.79452931880951, 41.45683545450073],
           [-90.79466342926025, 41.45673896510939],
           [-90.79486727714539, 41.45663041437253],
           [-90.79507648944855, 41.456457536898064],
           [-90.7953017950058, 41.456361046944515],
           [-90.79554319381714, 41.45627259769432],
           [-90.79570412635803, 41.45623239344981],
           [-90.79592943191528, 41.45622033217161],
           [-90.7961654663086, 41.456264556847394],
           [-90.79635858535767, 41.45629269980723],
           [-90.79651415348053, 41.45633692443369],
           [-90.79672873020172, 41.45636506736211],
           [-90.79698085784912, 41.456385169446364],
           [-90.79721689224243, 41.45640125110928],
           [-90.7974261045456, 41.45641331235384],
           [-90.79773724079132, 41.45642537359615],
           [-90.79794108867645, 41.45646557772105],
           [-90.79815030097961, 41.45648970018403],
           [-90.79844534397125, 41.45649774100302],
           [-90.79870820045471, 41.45652186345403],
           [-90.79900860786438, 41.45657814913817],
           [-90.79927146434784, 41.456602271559255],
           [-90.79957723617554, 41.45655804711373],
           [-90.79987227916718, 41.45655804711373],
           [-90.80011367797852, 41.456566087924244],
           [-90.8003979921341, 41.45658618994619],
           [-90.80069303512573, 41.4566263939714],
           [-90.80095052719116, 41.45667061837034],
           [-90.80120265483856, 41.45673092432029],
           [-90.80143868923187, 41.45676308747067],
           [-90.80170691013336, 41.456827413723616],
           [-90.80190539360046, 41.45690380106609],
           [-90.80209851264954, 41.456980188318596],
           [-90.80235064029694, 41.45701637172259],
           [-90.80258131027222, 41.45706059585564],
           [-90.80274760723114, 41.4570847180973],
           [-90.802903175354, 41.457064616229886],
           [-90.80308556556702, 41.456931943748536],
           [-90.80331087112427, 41.45694802527588],
           [-90.80364346504211, 41.45689173991273],
           [-90.8038204908371, 41.45685153605199],
           [-90.80397069454193, 41.45689576029743],
           [-90.80424964427948, 41.45693998451271],
           [-90.804523229599, 41.45697214755942],
           [-90.80474853515625, 41.457048534731435],
           [-90.80502212047577, 41.45708873847005],
           [-90.8052796125412, 41.457173166240025],
           [-90.80552101135254, 41.45722141063067],
           [-90.80566048622131, 41.45714502366226],
           [-90.80590188503265, 41.457136982923494],
           [-90.80619692802429, 41.457165125504766],
           [-90.80645442008972, 41.457185227341036],
           [-90.80705523490906, 41.45722543099494],
           [-90.807403922081, 41.45727367534672],
           [-90.80767214298248, 41.457301817868654],
           [-90.80795109272003, 41.457245532812536],
           [-90.80818176269531, 41.457185227341036],
           [-90.80844461917877, 41.457185227341036],
           [-90.80881476402283, 41.457257593900096],
           [-90.80887913703918, 41.45720532917111],
           [-90.80905616283417, 41.45720532917111],
           [-90.80914735794067, 41.4572656346239],
           [-90.80912590026855, 41.45733800109322],
           [-90.80920100212097, 41.45736614358727],
           [-90.80928683280945, 41.4572616142621],
           [-90.8095121383667, 41.45728573642903],
           [-90.80981254577637, 41.45730985858695],
           [-90.81005930900574, 41.45733398073595],
           [-90.81030070781708, 41.45733398073595],
           [-90.81068158149719, 41.45740232677596],
           [-90.81100344657898, 41.45742242853873],
           [-90.81156134605408, 41.457470672743945],
           [-90.81169545650482, 41.45736614358727],
           [-90.81181347370148, 41.45746263204558],
           [-90.81201195716858, 41.45746263204558],
           [-90.81200659275055, 41.45740232677596],
           [-90.81211388111115, 41.4573178993043],
           [-90.8122318983078, 41.45742242853873],
           [-90.81236600875854, 41.457498815180436],
           [-90.81259667873383, 41.45750685587434]]],
         [[[-90.80806374549866, 41.45100562946526],
           [-90.80775797367096, 41.45082469547809],
           [-90.80745220184326, 41.450736238678516],
           [-90.80721080303192, 41.450619636349295],
           [-90.807044506073, 41.45061159480163],
           [-90.80681920051575, 41.45058747015261],
           [-90.80658853054047, 41.45063169866893],
           [-90.80641150474548, 41.450639740214136],
           [-90.80617010593414, 41.450663864843676],
           [-90.80596625804901, 41.450619636349295],
           [-90.80581068992615, 41.45061561557557],
           [-90.80564439296722, 41.45071211407587],
           [-90.80540835857391, 41.450643760986324],
           [-90.80519914627075, 41.45074025944476],
           [-90.80509722232819, 41.4507080933079],
           [-90.80508649349213, 41.45086490307443],
           [-90.8050274848938, 41.45088500686324],
           [-90.80482363700867, 41.45087294459071],
           [-90.80480217933655, 41.45093325593096],
           [-90.80498993396759, 41.45096140120389],
           [-90.80521523952484, 41.4509774842115],
           [-90.80543518066406, 41.45095738045137],
           [-90.80557465553284, 41.45097346345997],
           [-90.80588579177856, 41.4509774842115],
           [-90.80597162246704, 41.45104181620213],
           [-90.80622375011444, 41.451033774706794],
           [-90.8065402507782, 41.45097346345997],
           [-90.80684065818787, 41.45096140120389],
           [-90.80707669258118, 41.45104985769648],
           [-90.8071357011795, 41.45098954646462],
           [-90.80738246440887, 41.450985525713826],
           [-90.80768287181854, 41.45106191993612],
           [-90.80813348293304, 41.45104583694943]]],
         [[[-90.80445349216461, 41.44996022612987],
           [-90.8039653301239, 41.449968267758294],
           [-90.80349326133728, 41.44990795552089],
           [-90.80321967601776, 41.44992805960628],
           [-90.80289244651794, 41.449964246944226],
           [-90.80253839492798, 41.450024559129254],
           [-90.80217897891998, 41.45007682964429],
           [-90.80186247825623, 41.45010899609417],
           [-90.80166935920715, 41.45015724573902],
           [-90.80144941806793, 41.45010095448319],
           [-90.80114901065826, 41.4501371417247],
           [-90.80082178115845, 41.45014920413402],
           [-90.80073058605194, 41.45020951614716],
           [-90.80053746700287, 41.45020147454863],
           [-90.80008685588837, 41.450213536946016],
           [-90.79960942268372, 41.45027786969422],
           [-90.79960942268372, 41.45031807762943],
           [-90.80003321170807, 41.45028189048886],
           [-90.80025315284729, 41.45031003604441],
           [-90.80044627189636, 41.45039045185007],
           [-90.80069303512573, 41.4503502439597],
           [-90.80090761184692, 41.45037436869689],
           [-90.80091834068298, 41.45044272207027],
           [-90.80100417137146, 41.45044272207027],
           [-90.80132603645325, 41.450382410273974],
           [-90.80149233341217, 41.45037838948554],
           [-90.80183029174805, 41.450334160796544],
           [-90.80202877521515, 41.45028993207742],
           [-90.80232918262482, 41.45028993207742],
           [-90.80262422561646, 41.450241682531214],
           [-90.80288708209991, 41.45024972412473],
           [-90.80319821834564, 41.450241682531214],
           [-90.8033698797226, 41.45028189048886],
           [-90.80362200737, 41.45028993207742],
           [-90.80390095710754, 41.450245703328115],
           [-90.80423355102539, 41.450322098421594],
           [-90.80450713634491, 41.450426638930075],
           [-90.80464124679565, 41.45031807762943],
           [-90.80464661121368, 41.4501371417247],
           [-90.8046680688858, 41.450024559129254]]]]);


//Change the following for each lake
var polygon = "0000e9b25b1d2d2c3f71"
var train_date = ee.Date("2005-07-19")

print(L0000e9b25b1d2d2c3f71.area())

//-------------Stays the same for each lake--------------//
//Find the polygon from the NRI database
var NRI = ee.FeatureCollection("users/chalab13/LWB_IA_all_years_geo"),
    NAIP = ee.ImageCollection("USDA/NAIP/DOQQ");

var predict_poly = NRI
  .filterMetadata("system:index", "equals", polygon)
  .geometry()

//Determine month and year of training date
var NAIP_range_year = ee.String(train_date.get('year'));
var NAIP_range_month = ee.String(ee.Algorithms.If(ee.Number(train_date.get('month')).lt(10),
          ee.String("0").cat(ee.String(train_date.get('month'))),
          ee.String(train_date.get('month'))));

//Function to calculate date for end of the month selected
//Non - GEE Functional version
var date_range = function(month, year) {
  var end_range = "";
  if(month == "09" || month == "04" || month == "06" || month == "11"){
    end_range = ee.String(year).cat("-").cat(month).cat("-").cat("30")
  } else {
    if(month == "02"){
      if(year % 4 === 0){
          end_range = ee.String(year).cat("-").cat(month).cat("-").cat("29")
      } else {
          end_range = ee.String(year).cat("-").cat(month).cat("-").cat("28")
      }
    } else {
      end_range = ee.String(year).cat("-").cat(month).cat("-").cat("31")
    }
  }
  return end_range
} // end function date_range()

//Produce a range of dates for the month of the NAIP image (1st through 30th of the month)
var NAIP_range_1 = NAIP_range_year.cat("-").cat(NAIP_range_month).cat("-").cat("01");
var NAIP_range_2 = date_range(NAIP_range_month.getInfo(), NAIP_range_year.getInfo());

//Collect NAIP images
var NAIP = NAIP
  .filterBounds(predict_poly)
  .filterDate(NAIP_range_1, NAIP_range_2)

//Add to map
Map.addLayer(predict_poly.buffer(800))
Map.addLayer(NAIP.select('R','G','B').mosaic().clip(predict_poly.buffer(800)))
Map.centerObject(NAIP, 14)
