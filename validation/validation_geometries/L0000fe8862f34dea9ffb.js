var L0000fe8862f34dea9ffb = /* color: #bf04c2 */ee.Geometry.MultiPolygon(
        [[[[-95.79229474067688, 41.09276677555931],
           [-95.79243421554565, 41.092605060392025],
           [-95.79214453697205, 41.092483773755326],
           [-95.79179048538208, 41.0923463152964],
           [-95.79159736633301, 41.09241908745756],
           [-95.79140424728394, 41.09228162886326],
           [-95.79151153564453, 41.09206331168124],
           [-95.79154372215271, 41.09192585234255],
           [-95.79158663749695, 41.0916671045719],
           [-95.7917046546936, 41.09132749657643],
           [-95.79183340072632, 41.09117386381129],
           [-95.79179048538208, 41.09091511307902],
           [-95.7916510105133, 41.09064018930938],
           [-95.79155445098877, 41.0904137806353],
           [-95.79154372215271, 41.09017119904726],
           [-95.79152226448059, 41.089920530465385],
           [-95.79147934913635, 41.08962943026689],
           [-95.79153299331665, 41.08928981173855],
           [-95.79167246818542, 41.08905531220637],
           [-95.79177975654602, 41.08888550167785],
           [-95.79192996025085, 41.08875612193301],
           [-95.79201579093933, 41.08885315676552],
           [-95.79206943511963, 41.088909760351676],
           [-95.79212307929993, 41.08878038065456],
           [-95.79204797744751, 41.0886752594631],
           [-95.79227328300476, 41.08854587930425],
           [-95.79248785972595, 41.088367981169846],
           [-95.79248785972595, 41.088238600405916],
           [-95.79262733459473, 41.088093046742024],
           [-95.79274535179138, 41.08797983811383],
           [-95.79274535179138, 41.08775342027233],
           [-95.79268097877502, 41.08719545868977],
           [-95.79258441925049, 41.08704181626261],
           [-95.79230546951294, 41.08699329752678],
           [-95.79212307929993, 41.086863914056046],
           [-95.79212307929993, 41.08671027085368],
           [-95.79206943511963, 41.0865000216788],
           [-95.79200506210327, 41.086314031463345],
           [-95.79184412956238, 41.08627359873813],
           [-95.79150080680847, 41.08615230041328],
           [-95.79129695892334, 41.086055261592186],
           [-95.79122185707092, 41.085909703091836],
           [-95.79135060310364, 41.08567519149643],
           [-95.79145789146423, 41.08534363919213],
           [-95.79158663749695, 41.08515764570362],
           [-95.79174757003784, 41.08499591180744],
           [-95.79194068908691, 41.084923131424326],
           [-95.79205870628357, 41.084809917334766],
           [-95.79200506210327, 41.084640095834736],
           [-95.79198360443115, 41.08447836066479],
           [-95.79211235046387, 41.0843570590261],
           [-95.79230546951294, 41.08426001755393],
           [-95.79263806343079, 41.084300451518075],
           [-95.79244494438171, 41.08420340996232],
           [-95.7922625541687, 41.08407402099842],
           [-95.792316198349, 41.08391228443526],
           [-95.79247713088989, 41.08368585257814],
           [-95.79262733459473, 41.08349985439757],
           [-95.7927668094635, 41.083427072357544],
           [-95.79290628433228, 41.08321681267796],
           [-95.79298138618469, 41.082933769739284],
           [-95.79304575920105, 41.08282055222251],
           [-95.79314231872559, 41.08278820432471],
           [-95.79302430152893, 41.08265072558158],
           [-95.79314231872559, 41.082416202355994],
           [-95.79317450523376, 41.08213315596922],
           [-95.79319596290588, 41.08194715339417],
           [-95.79300284385681, 41.08171262765788],
           [-95.79297065734863, 41.081494275358],
           [-95.79307794570923, 41.08125974800563],
           [-95.79315304756165, 41.080976696638224],
           [-95.79324960708618, 41.08073408021023],
           [-95.79330325126648, 41.08045102657895],
           [-95.7933247089386, 41.08014370982759],
           [-95.7934319972992, 41.07989300299247],
           [-95.79348564147949, 41.07971508143256],
           [-95.79365730285645, 41.07956142151595],
           [-95.79405426979065, 41.07927836283446],
           [-95.79396843910217, 41.07916513902052],
           [-95.79374313354492, 41.07919748870154],
           [-95.79360365867615, 41.079173226442265],
           [-95.79345345497131, 41.07924601319323],
           [-95.79331398010254, 41.07908426474831],
           [-95.79322814941406, 41.07883355387202],
           [-95.79329252243042, 41.07856666704966],
           [-95.79333543777466, 41.07835639182032],
           [-95.79328179359436, 41.07811376571982],
           [-95.79330325126648, 41.07791157661858],
           [-95.79336762428284, 41.07766894887613],
           [-95.79347491264343, 41.077466758406615],
           [-95.79341053962708, 41.07725647965856],
           [-95.7933783531189, 41.07696532335844],
           [-95.79335689544678, 41.076641814845736],
           [-95.79339981079102, 41.07641535793951],
           [-95.79347491264343, 41.07617272467424],
           [-95.79347491264343, 41.076027144285206],
           [-95.7933247089386, 41.0758896513995],
           [-95.79326033592224, 41.075735982539875],
           [-95.79329252243042, 41.07561466476537],
           [-95.79336762428284, 41.07543673162443],
           [-95.7932710647583, 41.07495954491409],
           [-95.79324960708618, 41.07473308221243],
           [-95.7932710647583, 41.074433826731486],
           [-95.79334616661072, 41.074215450250485],
           [-95.79341053962708, 41.07406177747717],
           [-95.79336762428284, 41.07377869511225],
           [-95.79334616661072, 41.07355222834264],
           [-95.79328179359436, 41.073236791184925],
           [-95.79318523406982, 41.072969881638535],
           [-95.79315304756165, 41.0726544416866],
           [-95.79318523406982, 41.07241988279248],
           [-95.79328179359436, 41.072266205821876],
           [-95.79331398010254, 41.07215296992948],
           [-95.7932710647583, 41.07203164554261],
           [-95.79300284385681, 41.071886055982844],
           [-95.7928740978241, 41.07167575938287],
           [-95.7928740978241, 41.07146546211023],
           [-95.79294919967651, 41.07126325255986],
           [-95.79293847084045, 41.070939715985666],
           [-95.79286336898804, 41.07066470864582],
           [-95.79270243644714, 41.0704786736166],
           [-95.79249858856201, 41.0703492576336],
           [-95.79230546951294, 41.07015513318152],
           [-95.79219818115234, 41.06997718526359],
           [-95.79157590866089, 41.06989629968714],
           [-95.79079270362854, 41.06988821112403],
           [-95.79006314277649, 41.06988012255992],
           [-95.78961253166199, 41.069863945428715],
           [-95.7893979549408, 41.070041893653126],
           [-95.78927993774414, 41.07031690359807],
           [-95.78906536102295, 41.07051911605903],
           [-95.78900098800659, 41.07080221245953],
           [-95.78905463218689, 41.07103677712509],
           [-95.78926920890808, 41.07135222483865],
           [-95.78953742980957, 41.07159487589607],
           [-95.78969836235046, 41.07178090776695],
           [-95.78980565071106, 41.071958850803036],
           [-95.79011678695679, 41.07206399873435],
           [-95.79020261764526, 41.07218532306151],
           [-95.79027771949768, 41.07237135326164],
           [-95.79044938087463, 41.072565471170094],
           [-95.79086780548096, 41.07315590961864],
           [-95.79105019569397, 41.07325296748623],
           [-95.7912540435791, 41.073374289619245],
           [-95.79129695892334, 41.07346325904116],
           [-95.79116821289062, 41.0736088451082],
           [-95.7912540435791, 41.073722078492985],
           [-95.79138278961182, 41.07394854467747],
           [-95.79144716262817, 41.074417650720726],
           [-95.79150080680847, 41.074749258145566],
           [-95.79152226448059, 41.075460995262915],
           [-95.79150080680847, 41.076196988041055],
           [-95.79154372215271, 41.076852095560106],
           [-95.79158663749695, 41.077369706760344],
           [-95.79160809516907, 41.078105678167695],
           [-95.79164028167725, 41.078631366984915],
           [-95.7917046546936, 41.079205576119314],
           [-95.79174757003784, 41.079488635114274],
           [-95.7918655872345, 41.07962612047199],
           [-95.79183340072632, 41.07993343964347],
           [-95.79179048538208, 41.08039441570641],
           [-95.7917582988739, 41.080806865232674],
           [-95.7917582988739, 41.08117887631074],
           [-95.79172611236572, 41.08137296821125],
           [-95.79179048538208, 41.08166410498726],
           [-95.79184412956238, 41.08204419828158],
           [-95.79196214675903, 41.08238385425923],
           [-95.79173684120178, 41.08291759582025],
           [-95.79149007797241, 41.08345941994085],
           [-95.79132914543152, 41.08398506593794],
           [-95.79112529754639, 41.08444601358301],
           [-95.79093217849731, 41.0848826978433],
           [-95.79067468643188, 41.08540024580153],
           [-95.79043865203857, 41.08587735671465],
           [-95.7902991771698, 41.08617656009617],
           [-95.7903528213501, 41.0863221180054],
           [-95.79030990600586, 41.086467675592196],
           [-95.79036355018616, 41.08660514635032],
           [-95.79062104225159, 41.086686011367824],
           [-95.79068541526794, 41.08659705984313],
           [-95.79072833061218, 41.08641915643243],
           [-95.7908570766449, 41.08637063723681],
           [-95.79100728034973, 41.086467675592196],
           [-95.79106092453003, 41.0866213193618],
           [-95.79126477241516, 41.0866698383723],
           [-95.79156517982483, 41.08669409786411],
           [-95.79177975654602, 41.0866698383723],
           [-95.79187631607056, 41.08683965462694],
           [-95.79177975654602, 41.08716311294548],
           [-95.79169392585754, 41.087397619230785],
           [-95.7913613319397, 41.087680642943305],
           [-95.79105019569397, 41.08806878776669],
           [-95.79076051712036, 41.08827094562081],
           [-95.7904064655304, 41.08840841260631],
           [-95.79004168510437, 41.08848118912928],
           [-95.78993439674377, 41.08862674193338],
           [-95.78970909118652, 41.088909760351676],
           [-95.78973054885864, 41.08900679495731],
           [-95.78991293907166, 41.08887741545128],
           [-95.79010605812073, 41.088586310631236],
           [-95.7902991771698, 41.08855396557164],
           [-95.79052448272705, 41.08852162049609],
           [-95.79081416130066, 41.08838415374742],
           [-95.79100728034973, 41.08837606745914],
           [-95.79118967056274, 41.088084960417895],
           [-95.7914686203003, 41.087777679364116],
           [-95.79174757003784, 41.087624038298316],
           [-95.79196214675903, 41.087405705639476],
           [-95.79209089279175, 41.087292495827064],
           [-95.79225182533264, 41.08736527358602],
           [-95.79232692718506, 41.087624038298316],
           [-95.7922625541687, 41.08782619752078],
           [-95.79227328300476, 41.08805261511148],
           [-95.79211235046387, 41.08816582361428],
           [-95.79196214675903, 41.08832754970849],
           [-95.79155445098877, 41.08873994944699],
           [-95.79137206077576, 41.08897445010467],
           [-95.79122185707092, 41.089297897914385],
           [-95.79121112823486, 41.08974263605289],
           [-95.79109311103821, 41.09011459654784],
           [-95.79105019569397, 41.090470382876966],
           [-95.79121112823486, 41.09082616727944],
           [-95.79140424728394, 41.0908908551456],
           [-95.79140424728394, 41.09110109027085],
           [-95.79144716262817, 41.091384098030915],
           [-95.79142570495605, 41.091634761028914],
           [-95.79135060310364, 41.091942024044386],
           [-95.79123258590698, 41.09221694236644],
           [-95.79106092453003, 41.09256463153801],
           [-95.79101800918579, 41.09282337577378],
           [-95.79102873802185, 41.093082118990516],
           [-95.79093217849731, 41.0932680900481],
           [-95.79062104225159, 41.093429803583284],
           [-95.79030990600586, 41.09361577365662],
           [-95.79007387161255, 41.09389877058419],
           [-95.79008460044861, 41.094108996084074],
           [-95.79017043113708, 41.09383408567965],
           [-95.79033136367798, 41.093656201863766],
           [-95.79055666923523, 41.093518745857935],
           [-95.7908034324646, 41.093397460908086],
           [-95.79099655151367, 41.09321957590993],
           [-95.79108238220215, 41.09300126184476],
           [-95.79108238220215, 41.092807204288924],
           [-95.79113602638245, 41.092629317692506],
           [-95.79124331474304, 41.09245951640113],
           [-95.79132914543152, 41.09239483007947],
           [-95.79133987426758, 41.09230588628316],
           [-95.79156517982483, 41.09247568797159],
           [-95.7918119430542, 41.09257271731081],
           [-95.79204797744751, 41.092685918025424]]],
         [[[-95.7933247089386, 41.09333277550993],
           [-95.79358220100403, 41.09340554657837],
           [-95.79351782798767, 41.093162976036766],
           [-95.79329252243042, 41.09306594756934],
           [-95.79314231872559, 41.09292040459949],
           [-95.79297065734863, 41.093074033280445],
           [-95.7927668094635, 41.09323574729329],
           [-95.79294919967651, 41.09333277550993],
           [-95.79319596290588, 41.093340861188196]]],
         [[[-95.79118967056274, 41.076083758919246],
           [-95.79118967056274, 41.075735982539875],
           [-95.79093217849731, 41.07570363115522],
           [-95.79059958457947, 41.07580877309713],
           [-95.79000949859619, 41.07583303659828],
           [-95.79033136367798, 41.075946266151966],
           [-95.7906424999237, 41.076059495510634],
           [-95.79088926315308, 41.07601905647635],
           [-95.79109311103821, 41.076091846720125]]],
         [[[-95.78802466392517, 41.07715942770184],
           [-95.78818559646606, 41.07715134003228],
           [-95.78832507133484, 41.07700576181058],
           [-95.78827142715454, 41.076892534081914],
           [-95.78816413879395, 41.07680356930111],
           [-95.78808903694153, 41.07673886756674],
           [-95.78792810440063, 41.076730779845455],
           [-95.78763842582703, 41.076827832435086],
           [-95.78744530677795, 41.07691679718304],
           [-95.78741312026978, 41.07704620023784],
           [-95.78763842582703, 41.077094726317725],
           [-95.7878851890564, 41.077110901669705]]],
         [[[-95.78877568244934, 41.08980328192943],
           [-95.78892588615417, 41.08972242074826],
           [-95.7889312505722, 41.089520267359916],
           [-95.78896880149841, 41.089394931946806],
           [-95.78896343708038, 41.089342371863715],
           [-95.78889906406403, 41.08932619952199],
           [-95.78870594501495, 41.08939088886498],
           [-95.78857719898224, 41.08950409506198],
           [-95.78845381736755, 41.08960921492743],
           [-95.78836798667908, 41.089677947056195],
           [-95.78836798667908, 41.089807324985884],
           [-95.78855037689209, 41.08981136804206],
           [-95.78873813152313, 41.08980328192943]]],
         [[[-95.79536318778992, 41.1031561406236],
           [-95.79524517059326, 41.10285701456802],
           [-95.79535245895386, 41.10271149329161],
           [-95.79564213752747, 41.102735746860056],
           [-95.795738697052, 41.10262256346394],
           [-95.79569578170776, 41.102266842949064],
           [-95.79545974731445, 41.10208089736765],
           [-95.79515933990479, 41.10202430512967],
           [-95.79481601715088, 41.10198388207269],
           [-95.79456925392151, 41.10208089736765],
           [-95.79441905021667, 41.10238002695824],
           [-95.79423666000366, 41.10265490159703],
           [-95.79441905021667, 41.10282467653447],
           [-95.79469799995422, 41.102994451033005],
           [-95.79498767852783, 41.103059126917]]],
         [[[-95.78811049461365, 41.1062847558222],
           [-95.78814268112183, 41.10612307393477],
           [-95.78815340995789, 41.105912886885896],
           [-95.78801393508911, 41.10567844669155],
           [-95.78796029090881, 41.10549251076986],
           [-95.78775644302368, 41.10545208984764],
           [-95.78754186630249, 41.105597605051145],
           [-95.7873809337616, 41.105751204082814],
           [-95.7874345779419, 41.105904802755205],
           [-95.78769207000732, 41.106009896376676],
           [-95.7878851890564, 41.10620391492825],
           [-95.78798174858093, 41.10629283990616]]],
         [[[-95.78807830810547, 41.082398006553525],
           [-95.78818291425705, 41.082321179776386],
           [-95.7881909608841, 41.082218070013255],
           [-95.78815877437592, 41.082078568311545],
           [-95.78814536333084, 41.08199365408726],
           [-95.78800320625305, 41.08201589353757],
           [-95.78789323568344, 41.08206037241557],
           [-95.78775107860565, 41.08209474243706],
           [-95.78771084547043, 41.08217359124196],
           [-95.78771352767944, 41.082270635795055],
           [-95.78778058290482, 41.082371723718815],
           [-95.78789860010147, 41.082406093577475],
           [-95.7880300283432, 41.0824081153333],
           [-95.7880112528801, 41.08232320153482],
           [-95.78789591789246, 41.082319158017874],
           [-95.78783422708511, 41.08227872283468],
           [-95.78779399394989, 41.08223222234327],
           [-95.78779935836792, 41.082167525952634],
           [-95.78784763813019, 41.08211900361789],
           [-95.78795224428177, 41.08209878596782],
           [-95.78803807497025, 41.082086655374816],
           [-95.78808635473251, 41.08209676420247],
           [-95.78814536333084, 41.08216550418942],
           [-95.78814536333084, 41.08224839643098],
           [-95.78812658786774, 41.08231309274197],
           [-95.78802198171616, 41.08231309274197],
           [-95.7880488038063, 41.082406093577475]]]]);



//Change the following for each lake
var polygon = "0000fe8862f34dea9ffb"
var train_date = ee.Date("2004-09-14")

print(L0000fe8862f34dea9ffb.area())

//-------------Stays the same for each lake--------------//
//Find the polygon from the NRI database
var NRI = ee.FeatureCollection("users/chalab13/LWB_IA_all_years_geo"),
    NAIP = ee.ImageCollection("USDA/NAIP/DOQQ");

var predict_poly = NRI
  .filterMetadata("system:index", "equals", polygon)
  .geometry()

//Determine month and year of training date
var NAIP_range_year = ee.String(train_date.get('year'));
var NAIP_range_month = ee.String(ee.Algorithms.If(ee.Number(train_date.get('month')).lt(10),
          ee.String("0").cat(ee.String(train_date.get('month'))),
          ee.String(train_date.get('month'))));

//Function to calculate date for end of the month selected
//Non - GEE Functional version
var date_range = function(month, year) {
  var end_range = "";
  if(month == "09" || month == "04" || month == "06" || month == "11"){
    end_range = ee.String(year).cat("-").cat(month).cat("-").cat("30")
  } else {
    if(month == "02"){
      if(year % 4 === 0){
          end_range = ee.String(year).cat("-").cat(month).cat("-").cat("29")
      } else {
          end_range = ee.String(year).cat("-").cat(month).cat("-").cat("28")
      }
    } else {
      end_range = ee.String(year).cat("-").cat(month).cat("-").cat("31")
    }
  }
  return end_range
} // end function date_range()

//Produce a range of dates for the month of the NAIP image (1st through 30th of the month)
var NAIP_range_1 = NAIP_range_year.cat("-").cat(NAIP_range_month).cat("-").cat("01");
var NAIP_range_2 = date_range(NAIP_range_month.getInfo(), NAIP_range_year.getInfo());

//Collect NAIP images
var NAIP = NAIP
  .filterBounds(predict_poly)
  .filterDate(NAIP_range_1, NAIP_range_2)

//Add to map
Map.addLayer(predict_poly.buffer(800))
Map.addLayer(NAIP.select('R','G','B').mosaic().clip(predict_poly.buffer(800)))
Map.centerObject(NAIP, 14)
